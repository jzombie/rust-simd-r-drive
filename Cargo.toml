[workspace.package]
authors = ["Jeremy Harris <jeremy.harris@zenosmosis.com>"]
version = "0.7.0-alpha"
edition = "2024"
repository = "https://github.com/jzombie/rust-simd-r-drive"
license = "Apache-2.0"
categories = ["database-implementations", "data-structures", "filesystem"]
keywords = ["storage-engine", "binary-storage", "append-only", "simd", "mmap"]
publish = false

[package]
name = "simd-r-drive"
description = "SIMD-optimized append-only schema-less storage engine. Key-based binary storage in a single-file storage container."
authors.workspace = true # Inherit from workspace
edition.workspace = true # Inherit from workspace
version.workspace = true  # Inherit from workspace
repository.workspace = true # Inherit from workspace
license.workspace = true # Inherit from workspace
categories.workspace = true # Inherit from workspace
keywords.workspace = true # Inherit from workspace
publish.workspace = true # Inherit from workspace

[workspace.dependencies]
# Intra-workspace crates
simd-r-drive = { path = ".", version = "0.7.0-alpha" }
simd-r-drive-extensions = { path = "./extensions/simd-r-drive-extensions", version = "0.7.0-alpha" }
simd-r-drive-py = { path = "./bindings/python", version = "0.7.0-alpha" }
simd-r-drive-muxio-service-definition = { path = "./experiments/simd-r-drive-muxio-service-definition", version = "0.7.0-alpha" }

[dependencies]
async-trait = "0.1.88"
crc32fast = "1.4.2"
env_logger = "0.11.7"
indoc = "2.0.6"
log = "0.4.26"
memmap2 = "0.9.5"

[dependencies.clap]
version = "4.5.32"
features = ["derive"]

[dependencies.xxhash-rust]
version = "0.8.12"
features = ["xxh3", "const_xxh3"]

[dev-dependencies]
rand = "0.9.0"
tempfile = "3.18.0"
bincode = "1.3.3"
serde_json = "1.0.140"
serial_test = "3.2.0"
serde = { version = "1.0.219", features = ["derive"] }
tokio = { version = "1.44.0", features = ["rt-multi-thread", "macros", "time", "sync"] }

[[bench]]
name = "storage_benchmark"
harness = false

[features]
default = []
expose-internal-api = []

[workspace]
members = [
    ".",
    "extensions",
    "bindings/python",
    "experiments/simd-r-drive-muxio-server",
    "experiments/simd-r-drive-muxio-client",
    "experiments/simd-r-drive-muxio-service-definition"
]
resolver = "2"
